!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),r.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),r.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),r("9XI3k"),r("7hKzD"),r("i8Q71"),r("gVa74");var i=r("8nrFW"),c=r("bpxeT"),o=r("8MBJY"),s={};Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e,t){var n=u.default(e,t,"get");return l.default(e,n)};var u=p(r("1UHsN")),l=p(r("ffZzF"));function p(e){return e&&e.__esModule?e:{default:e}}var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e,t,n){f.default(e,t),t.set(e,n)};var d,f=(d=r("5k7tO"))&&d.__esModule?d:{default:d};var m,v,g=r("a2hTj"),h=r("2TvXO"),b=r("dIxxU"),y=new WeakMap,x=new WeakMap,w=function(){"use strict";function t(){e(o)(this,t),e(_)(this,y,{writable:!0,value:"https://api.themoviedb.org/3/"}),e(_)(this,x,{writable:!0,value:"5e0b2043a7bdefdf129debb784bbe1f7"}),this.page=1}return e(g)(t,[{key:"getFilmByName",value:function(t){var n=this;return e(c)(e(h).mark((function a(){var r,i;return e(h).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new URLSearchParams({api_key:e(s)(n,x),query:t,page:n.page}),a.next=3,b.default.get("".concat(e(s)(n,y),"search/movie?").concat(r));case 3:if((i=a.sent).data.results.length){a.next=6;break}throw new Error("OOPS...We are very sorry!We don’t have any results matching your search.");case 6:return a.abrupt("return",i.data);case 7:case"end":return a.stop()}}),a)})))()}},{key:"getFilmById",value:function(t){var n=this;return e(c)(e(h).mark((function a(){var r;return e(h).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.default.get("".concat(e(s)(n,y),"movie/").concat(t,"?api_key=").concat(e(s)(n,x)));case 2:return r=a.sent,a.abrupt("return",r.data);case 4:case"end":return a.stop()}}),a)})))()}},{key:"getUpcomingFilm",value:function(){var t=this;return e(c)(e(h).mark((function n(){var a,r;return e(h).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Math.floor(19*Math.random()),n.next=3,b.default.get("".concat(e(s)(t,y),"movie/upcoming?api_key=").concat(e(s)(t,x)));case 3:return r=n.sent,n.next=6,t.getFilmById(r.data.results[a].id);case 6:M(n.sent);case 8:case"end":return n.stop()}}),n)})))()}}]),t}(),I=r("5xtVg"),j=document.querySelector(".js-upcoming-container"),k=[];function M(t){var n=t.genres.reduce((function(e,t){return e+="".concat(t.name," ")}),"").split(" ").filter((function(e){return e}));n.length=2;var a=n.join(", "),r='<img class="upcoming__image"\n             src="https://image.tmdb.org/t/p/original/'.concat(t.backdrop_path,'" alt="').concat(t.original_title,'" \n             loading="lazy"/>\n             <div class="desktop__info__wrapper">\n            <div class="upcoming__info-wrapper">\n                <h3 class="upcoming__film__title">').concat(t.original_title,'</h3>\n                <ul class="upcoming__list__rating">\n                    <li>\n                    <ul class="upcoming__item__rating">\n                        <li>Release date</li>\n                        <li>Vote &#47; Votes</li>\n                        <li>Popularity</li>\n                        <li>Genre</li>\n                    </ul>\n                </li>\n                <li>\n                    <ul class="upcoming__item__rating">\n                        <li class="upcoming__item_customize">').concat(t.release_date,'</li>\n                        <li class="upcoming__item_customize"><span>').concat(t.vote_average.toFixed(1),"</span> &#47; <span>").concat(t.vote_count,'</span></li>\n                        <li class="upcoming__item_customize">').concat(t.popularity,'</li>\n                        <li class="upcoming__item_customize">').concat(a,'</li>\n                    </ul>\n                </li>\n                </ul>\n                <ul class="upcoming__list__tablet">\n                    <li class="upcoming__tablet__item">\n                        <p class="tablet__subtitle">Release date</p>\n                        <p class="tablet__info">').concat(t.release_date,'</p>\n                    </li>\n                    <li class="upcoming__tablet__item">\n                        <p class="tablet__subtitle">Popularity</p>\n                        <p class="tablet__info upcoming__item_customize">').concat(t.popularity.toFixed(1),'</p>\n                    </li>\n                    <li class="upcoming__tablet__item">\n                        <p class="tablet__subtitle">Vote &#47; Votes</p>\n                        <p class="tablet__info upcoming__item_customize"><span>').concat(t.vote_average.toFixed(1),"</span> &#47; <span>").concat(t.vote_count,'</span></p>\n                    </li>\n                    <li class="upcoming__tablet__item">\n                        <p class="tablet__subtitle">Genre</p>\n                        <p class="tablet__info upcoming__item_customize">').concat(n,'</p>\n                    </li>\n                </ul>\n            </div>\n            <div class="upcoming-about-wrapper">\n                    <p class="upcoming__about__title">About</p>\n                    <p>').concat(t.overview,'</p>\n                </div>\n            <button class="upcoming__btn" type="button">Add to my library</button>\n            </div>');j.innerHTML=r,v=t.id,m=document.querySelector(".upcoming__btn");try{(0,I.loadLs)(I.KEY);k.some((function(e){return e.id===v}))&&(m.textContent="Remove from my library"),m.addEventListener("click",(function(){try{var n=(0,I.loadLs)(I.KEY);if(n&&(k=e(i)(n)),!k.some((function(e){return e.id===+v})))return k.push(t),(0,I.saveLs)(I.KEY,k),void(m.textContent="Remove from my library");var a=k.findIndex((function(e){return e.id===Number(v)}));k.splice(a,1),localStorage.removeItem(I.KEY),(0,I.saveLs)(I.KEY,k),m.textContent="Add to my library"}catch(e){console.error("Set state error: ",e.message)}}))}catch(e){console.log(e.code)}}(new w).getUpcomingFilm();c=r("bpxeT"),h=r("2TvXO"),b=r("dIxxU");var O=document.querySelector(".trends__list"),Y="https://api.themoviedb.org/3/";function J(e){return T.apply(this,arguments)}function T(){return T=e(c)(e(h).mark((function t(n){var a;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map(function(){var t=e(c)(e(h).mark((function t(n){var a,r,i,c,o,s,u,l;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,r=n.genre_ids,i=n.poster_path,c=n.release_date,o=n.title,s=n.vote_average,e.next=3,N(r);case 3:return u=e.sent,l=B(c),e.abrupt("return",'<li class="trends__item" id='.concat(a,'>\n        <img\n          src="https://image.tmdb.org/t/p/original/').concat(i,'"\n          alt="').concat(o,'"\n          class="trends__photo"\n        loading="lazy"/>\n        <div class="trends__description">\n          <div class="trends__info">\n            <h3 class="trends__name">').concat(o,'</h3>\n            <p class="trends__ganre">').concat(u,"|").concat(l,'</p>\n          </div>\n          <div class="raiting__body">\n            <div class="rating__active" style="width: ').concat(10*s,'px">\n              <div class="rating__active__wrapper">\n                <span class="rating__active__color">★</span>\n                <span class="rating__active__color">★</span>\n                <span class="rating__active__color">★</span>\n                <span class="rating__active__color">★</span>\n                <span class="rating__active__color">★</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </li>'));case 6:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return a=t.sent,t.abrupt("return",a.join(""));case 4:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function z(){return(z=e(c)(e(h).mark((function t(n){var a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(n);case 2:a=e.sent,O.innerHTML=a;case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function F(){return Z.apply(this,arguments)}function Z(){return(Z=e(c)(e(h).mark((function t(){var n,a,r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.default.get("".concat(Y,"genre/movie/list"),{headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1ZTBiMjA0M2E3YmRlZmRmMTI5ZGViYjc4NGJiZTFmNyIsInN1YiI6IjY0ZDA5ZWY5ODUwOTBmMDBjODdkY2FjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.AoWYcFyuoQyP_ePohi3LRcw4Fp8RAJIbZs-uo4526oA"},params:{language:"en"}});case 2:return n=e.sent,a=n.data,r=a.genres,e.abrupt("return",r);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function N(e){return A.apply(this,arguments)}function A(){return(A=e(c)(e(h).mark((function t(n){var a,r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Nice film",0!==n.length){e.next=3;break}return e.abrupt("return","Nice film");case 3:return e.prev=3,e.next=6,F();case 6:return a=e.sent,r=a.filter((function(e){return e.id===n[0]})).map((function(e){return e.name})).join(" "),e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0.code);case 14:case"end":return e.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}function B(e){return(e=e.split("-"))[0]}b.default.request({method:"GET",url:"https://api.themoviedb.org/3/trending/movie/week",params:{language:"en-US"},headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1ZTBiMjA0M2E3YmRlZmRmMTI5ZGViYjc4NGJiZTFmNyIsInN1YiI6IjY0ZDA5ZWY5ODUwOTBmMDBjODdkY2FjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.AoWYcFyuoQyP_ePohi3LRcw4Fp8RAJIbZs-uo4526oA"}}).then((function(e){!function(e){z.apply(this,arguments)}(e.data.results)})).catch((function(e){})),r("5xtVg"),r("bBqzh")}();
//# sourceMappingURL=index.e67b5a3e.js.map
